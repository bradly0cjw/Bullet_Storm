2025 資工系物件導向程式設計實習  
![image](https://hackmd.io/_uploads/r1QkgIO7ee.png)

期末報告  

## 雷電X  

第23組  
- 111590455 曾詮淳  
- 111590453 張竣崴  

---

## 目錄

- 一、 專案簡介  
  - 遊戲簡介  
- 二、 遊戲介紹  
  - 遊戲規則  
  - 遊戲畫面  
- 三、 程式設計  
  - 程式架構  
  - 程式技術  
- 四、 結語  
  - 問題及解決方法  
  - 貢獻比例  
  - 自我檢核表  
  - 收穫  
  - 心得、感想  
  - 對於本課程的建議  

---

## 一、 專案簡介

### 1. 遊戲簡介

《雷電X》是一款直向捲軸的射擊遊戲，致敬經典街機遊戲《雷電（Raiden）》。  
玩家將操控一架戰鬥機穿越敵陣，擊落來自四面八方的敵人，收集強化道具，並挑戰最終 Boss。  

遊戲具有多波敵人攻勢、Boss 戰、技能釋放與升級系統，玩家可在過程中收集技能點、強化武器，並在下一關開始前進行戰略調整。遊戲節奏緊湊，畫面動態豐富，具備高度挑戰性與可玩性。

---

## 二、 遊戲介紹

### 1. 遊戲規則

玩家可透過鍵盤操控戰鬥機移動（方向鍵），使用空白鍵發射子彈，Z 鍵使用技能，空白鍵切換武器。敵人會從畫面上下方或兩側出現，擊中玩家會損失生命值。

當生命值歸零即為遊戲結束。每一關會有一個 Boss，擊敗後即可進入下一關。遊戲共設計三個關卡，每一關皆有不同背景與敵人模式。

**技能系統：**
- 可於關卡中獲得技能點數，用來升級技能（如追蹤飛彈、增強火力）。
- 技能點與剩餘生命會顯示於畫面左下角。

**作弊模式（僅限 debug 與最終測試使用）：**
- H 鍵：切換武器
- J 鍵：增加一顆心
- K 鍵：升級武器
- L 鍵：跳轉下一關

### 2. 遊戲畫面

![螢幕擷取畫面 2025-06-12 202431](https://hackmd.io/_uploads/r1MwxI_Qxg.png)
 
 ![image](https://hackmd.io/_uploads/BJWSlUOmxx.png)


![螢幕擷取畫面 2025-06-12 202448](https://hackmd.io/_uploads/SkEYgLOQxe.png)

 
 ![螢幕擷取畫面 2025-06-12 202602](https://hackmd.io/_uploads/r1qFxI_mex.png)

 
 
![螢幕擷取畫面 2025-06-12 202350](https://hackmd.io/_uploads/Sy6KlLOQll.png)


---

## 三、 程式設計

### 1. 程式架構

本遊戲使用 C++ 製作，並以物件導向方式進行模組設計。程式主要分為以下幾大模組：

- `App`：遊戲主流程與狀態控制器  
- `AnimatedCharacter` / `Character`：處理玩家角色動畫與邏輯  
- `Bullet`：子彈類別，包含敵方與我方子彈處理  
- `Enemy`：敵人類別，支援多種行為模式  
- `Boss`：Boss 特化類別，具備特殊攻擊模式與血量判定  
- `PowerUp`：道具系統，提供技能點或恢復生命值  
- `PhaseManager`：關卡管理與關卡切換邏輯  
- `ResourceManager`：資源與圖像載入統一入口  
- ![image](https://hackmd.io/_uploads/S1iGgmWElg.png)


### 2. 程式技術

#### A. 子彈與碰撞機制

- 所有子彈（包括玩家與敵人）皆以 `Bullet` 類別表示，統一管理其速度、方向、位置與所屬陣營。  
- 透過 `inBound()` 方法傳回子彈或角色的位置範圍，再與其他物件做交集檢查。  
- 子彈碰撞後會觸發相對應的行為，如敵人扣血、玩家扣血、銷毀子彈等，並在下一幀將其從記憶體移除。

#### B. 技能系統與顯示

- 技能以技能點數為資源，玩家可以使用技能造成全畫面爆破或敵人緩速等效果。  
- 於 `App.cpp` 內實作 `skillPoint` 與 `useSkill()` 函數，配合 `PowerUp` 類別中的道具拾取邏輯更新技能點。  
- 畫面左下角有 HUD 顯示技能點與生命值，動態更新顯示內容。

#### C. Debug 模式與作弊機制

- 為方便測試與調整遊戲，加入了作弊模式按鍵：
  - H 鍵：切換武器類型（`player->SwitchWeapon()`）  
  - J 鍵：增加一顆心（`player->AddHP()`）  
  - K 鍵：升級武器（`player->UpgradeWeapon()`）  
  - L 鍵：直接跳關（`phaseManager->NextPhase()`）  
- 為避免按鍵重複觸發，加入 `std::map<int, bool> keyPressed` 判斷鍵是否被放開，須釋放後才能再次觸發。

#### D. 敵人 AI 與特殊敵人行為

- 基本敵人以 `Enemy` 類別生成，隨時間向下移動，並以固定間隔發射子彈。  
- 特殊敵人（如衝撞型 `CHARGER`）擁有不同行為邏輯：
  - 計算與玩家的相對位置，快速直線衝向玩家。  
  - 實作於 `ChargerEnemy::Update()` 中，若進入攻擊範圍則開啟加速模式。  
- 敵人出現位置預設為畫面上方，但透過參數可控制從下方生成敵人，實現多元的入場方式。

#### E. 關卡與資源管理

- 遊戲每一關由 `PhaseManager` 控制切換與初始化，關卡資料包含敵人生成頻率、背景圖片、Boss 類型等。  
- `PhaseResourceManager` 用於載入每關所需的資源（圖檔、Boss 參數等），並進行快取避免重複讀取。  
- 每次切換關卡前儲存當前遊戲狀態（血量、技能點、武器等），並於下一關初始化時還原。

---

## 四、 結語

### 1. 問題及解決方法

- **問題一：連按鍵會觸發多次技能**  
  → 解法：加入按鍵狀態切換機制，須放開鍵再觸發下一次輸入。  

- **問題二：切換關卡時資訊未正確保留**  
  → 解法：透過 `ResetLevel()` 設計資料更新機制，管理每關需要更新的變數。  

- **問題三：敵人生成方向單一**  
  → 解法：新增從畫面下方出現的敵人，擴充敵人行為與進場路徑設計。

### 2. 貢獻比例

貢獻比例為曾詮淳與張竣崴各 50%，在整體程式架構設計、實作與除錯兩人均有參與。

### 3. 自我檢核表

| 項目 | 完成狀況 |
|------|----------|
| 遊戲完成至少三關以上 | ✅ |
| 公開專案至 GitHub 並設為 public | ✅ |
| 實作作弊按鍵 | ✅ |
| 每週都到 | ✅ |
| 報告格式應該完整 | ✅ |
| 人類可玩 | ✅ |

### 4. 收穫

這次實作讓我更加熟悉物件導向設計與 C++ 的遊戲開發技巧，也學會如何管理大型專案的模組分工與除錯流程，收穫豐富。

### 5. 心得、感想

一開始的發想來自我童年對《雷電》這款遊戲的喜愛，而自己動手將它復刻，不僅完成了兒時夢想，也大大提升了我在設計模式與動態物件管理上的能力。

### 6. 對於本課程的建議

課程安排合理，助教與老師給予充足的協助。

---
